define("module/poto/util",["zepto","tmpl","iscroll","module/poto/net"],function(i,t,o){"use strict";function n(i){return document.querySelector(i)}function e(i,t){m("getUser",{query:t},function(t){return 0==t.length?void g.Jusers.html('<li class="null"><div class="con">该用户还未关注你哟</div></li>'):(g.Jusers.html(p("tmpl-dialog-user",t)),new f("#J_myfriScroll",{mouseWheel:!0}),void g.Jusers.find(".item").on("tap",function(){var t=d(this),o=t.attr("data-uid"),n=t.text();i.val(n),i.attr("data-uid",o),d("#J_myfri").css("display","none")}))})}function a(i){m("checkPrize",i,function(t){"invite"===i.type?(g.JinviteNum.html(t.invitecounter),2==t.errortype?l("log",{msg:"人家早就在里面等你辣～"}):l("log",{msg:"邀请成功"}),d("#J_inviteuser").val("")):"shits"===i.type?l("log",{msg:"Biu出去啦！"}):u()},function(t){return"invite"==i.type?void(2==t.state?l("log",{msg:"人家早就在里面等你辣～"}):1==t.state&&l("log",{msg:"用户不存在，你确定是真爱？"})):void l("log",{msg:t})})}function s(i,t){t.on("tap",function(){l(i),d(".ipt").on("tap",function(){var i=d(this);i.focus()}),d("#J_sbt").on("tap",function(){u()})})}function l(i,t){v&&console.log(t),g.dialogMain.html(p("tmpl-dialog-"+i,t)),g.dialog.css("display","block");var o=setTimeout(function(){g.dialog.addClass("in"),g.backdrop.addClass("in"),clearTimeout(o)},0);g.backdrop.on("tap",function(){u()});var n=d("#J_sbt");if(n&&n.on("tap",function(){u()}),d("form").on("submit",function(){return!1}),r(),"log"===i)var s=setTimeout(function(){u(),clearTimeout(s)},2e3);if("invite"===i){var l=d("#J_inviteuser2");l.on("keyup",function(){var i=d(this),t=i.val();i.focus(),d("#J_myfri").css("display","block"),e(l,t)}),d("#J_graph2").on("tap",function(){var i=l.val();if(""==i)return void alert("矮油，请输入邀请好友。");var t={type:"invite",nickname:i};a(t)})}"shits"===i&&d("#J_say").on("tap",function(){var i=d("#J_sayWorks").val(),t={type:"shits",content:i};a(t)})}function r(){var i=d("input, textarea");i&&i.on("tap",function(){var i=d(this);i.focus()})}function u(){g.dialog.removeClass("in"),g.backdrop.removeClass("in")}function c(){g.dialog.hasClass("in")||(g.dialog.css("display","none"),d("#J_myfri").css("display","none"))}var d=i("zepto"),p=i("tmpl"),f=i("iscroll"),m=i("module/poto/net"),v=0,g={btnPop:d("#J_btnPop"),dialog:d("#J_dialog"),dialogMain:d("#J_dialog .modal-main"),backdrop:d(".modal-backdrop"),JinviteNum:d("#J_inviteNum"),Jusers:d("#J_users")},J={getUser:e,checkPrize:a,dialog:s,showDialog:l,hideDialog:u,initIpt:r};void 0!==n("#J_dialog").style.WebkitTransition&&n("#J_dialog").addEventListener("webkitTransitionEnd",function(){c()},!1),o.exports=t=J});